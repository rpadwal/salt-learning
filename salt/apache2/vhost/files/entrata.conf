<VirtualHost *:80>
{% if salt['grains.get']('environment') == 'lcl' %}
  ServerName entratadev.com
  ServerAlias {{ salt['grains.get']('devuser') }}.entrata.lcl
  ServerAlias *.entratadev.com
  ServerAlias *.{{ salt['grains.get']('devuser') }}.entrata.lcl
{%- else %}
  ServerName entrata.com
  ServerAlias *.entrata.com
  ServerAlias *.propertysolutions.com
{%- endif %}

  ServerAdmin webmaster@entrata.com

  DocumentRoot /srv/www/vhosts/Entrata/www/Entrata

  <Directory "/srv/www/vhosts/Entrata/www/Entrata">
    <LimitExcept GET POST HEAD OPTIONS>
      Require all denied
    </LimitExcept>
    AllowOverride FileInfo
    Options FollowSymLinks SymLinksIfOwnerMatch
    Require all granted
  </Directory>

  Include /etc/apache2/conf-available/callfiles.conf
  Include /etc/apache2/conf-available/common.conf
  Include /etc/apache2/conf-available/helpresources.conf
  Include /etc/apache2/conf-available/medialibrary.conf
  Include /etc/apache2/conf-available/newrelic.conf
  Include /etc/apache2/conf-available/residentmaintenance.conf
  Include /etc/apache2/conf-available/staticmedias.conf
  Include /etc/apache2/conf-available/websitescache.conf
  Include /etc/apache2/mods-available/sap-proxy.conf
</VirtualHost>
