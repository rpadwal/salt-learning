<VirtualHost *:80>
{%- if salt['grains.get']('environment') == 'lcl' %}
  ServerName clientadmin.entratadev.com
  ServerAlias clientadmin.{{ salt['grains.get']('devuser') }}.entrata.lcl
{%- elif salt['grains.get']('track') == 'standard' %}
  ServerName clientadminstandard.entrata.com
  ServerAlias clientadminstandard.properysolutions.com
{%- elif salt['grains.get']('track') == 'transition' %}
  ServerName tclientadmin.entrata.com
  ServerAlias tclientadmin.propertysolutions.com
{%- else %}
  ServerName clientadmin.entrata.com
  ServerAlias clientadmin.propertysolutions.com
{%- endif %}

  ServerAdmin webmaster@entrata.com

  DocumentRoot /srv/www/vhosts/Entrata/www/Admin/

  <Directory "/srv/www/vhosts/Entrata/www/Admin/">
    <LimitExcept GET POST HEAD OPTIONS>
      Require all denied
    </LimitExcept>
    AllowOverride FileInfo
    Options FollowSymLinks SymLinksIfOwnerMatch
    Require all granted
  </Directory>

  Include /etc/apache2/conf-available/adminmedias.conf
  Include /etc/apache2/conf-available/callfiles.conf
  Include /etc/apache2/conf-available/common.conf
  Include /etc/apache2/conf-available/helpresources.conf
  Include /etc/apache2/conf-available/medialibrary.conf
  Include /etc/apache2/conf-available/newrelic.conf
  Include /etc/apache2/conf-available/reimbursements.conf
  Include /etc/apache2/conf-available/taskattachments.conf
  Include /etc/apache2/conf-available/entratawebsite.conf

</VirtualHost>
