<VirtualHost *:80>
{% if salt['grains.get']('environment') == 'lcl' %}
  ServerName www.prospectportaldev.com
  ServerAlias www.{{ salt['grains.get']('devuser') }}.prospectportal.lcl
  ServerAlias *.prospectportaldev.com
  ServerAlias *.{{ salt['grains.get']('devuser') }}.prospectportal.lcl
{% else %}
  ServerName www.prospectportal.com
  ServerAlias *
{%- endif %}

  ServerAdmin webmaster@entrata.com

  DocumentRoot /srv/www/vhosts/Entrata/www/ProspectPortal/

  <Directory "/srv/www/vhosts/Entrata/www/ProspectPortal/">
    <LimitExcept GET POST HEAD OPTIONS>
      Require all denied
    </LimitExcept>
    AllowOverride FileInfo
    Options FollowSymLinks SymLinksIfOwnerMatch
    Require all granted
  </Directory>

  <Files ~ (Apartments|index|Apts)>
    ForceType application/x-httpd-php
  </Files>

  Include /etc/apache2/conf-available/common.conf
  Include /etc/apache2/conf-available/employeeportal.conf
  Include /etc/apache2/conf-available/newrelic.conf
  Include /etc/apache2/conf-available/ownerportal.conf
  Include /etc/apache2/conf-available/residentportal.conf
  Include /etc/apache2/conf-available/websitescache.conf

</VirtualHost>
