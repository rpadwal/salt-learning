<VirtualHost *:80>

{% if salt['grains.get']('environment') == 'lcl' -%}
  ServerName jobs.entratadev.com
  ServerAlias jobs.{{ salt['grains.get']('devuser') }}.entrata.lcl
  ServerAlias rjobs.entratadev.com
  ServerAlias rjobs.{{ salt['grains.get']('devuser') }}.entrata.lcl
{% elif salt['grains.get']('track') == 'rapid' -%}
  ServerName rjobs.entrata.com
  ServerAlias rjobs.propertysolutions.com
{% elif salt['grains.get']('track') == 'transition' -%}
  ServerName tjobs.entrata.com
  ServerAlias tjobs.propertysolutions.com
{% else -%}
  ServerName jobs.entrata.com
  ServerAlias jobs.propertysolutions.com
{% endif -%}

  ServerAdmin webmaster@entrata.com

  DocumentRoot /srv/www/vhosts/Entrata/www/Jobs/

  <Directory "/srv/www/vhosts/Entrata/www/Jobs/">
    <LimitExcept GET POST HEAD OPTIONS>
      Require all denied
    </LimitExcept>
    AllowOverride None
    Options None
    Require all granted
  </Directory>

  Include /etc/apache2/conf-available/common.conf
  Include /etc/apache2/conf-available/newrelic.conf

</VirtualHost>
